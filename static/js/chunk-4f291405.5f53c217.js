(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f291405","chunk-2d23031f"],{"21a6":function(e,t,n){(function(n){var l,a,i;(function(n,o){a=[],l=o,i="function"===typeof l?l.apply(t,a):l,void 0===i||(e.exports=i)})(0,(function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function l(e,t,n){var l=new XMLHttpRequest;l.open("GET",e),l.responseType="blob",l.onload=function(){r(l.response,t,n)},l.onerror=function(){console.error("could not download file")},l.send()}function a(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(l){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,r=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=o.URL||o.webkitURL,c=document.createElement("a");t=t||e.name||"download",c.download=t,c.rel="noopener","string"==typeof e?(c.href=e,c.origin===location.origin?i(c):a(c.href)?l(e,t,n):i(c,c.target="_blank")):(c.href=r.createObjectURL(e),setTimeout((function(){r.revokeObjectURL(c.href)}),4e4),setTimeout((function(){i(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,o){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,o),n);else if(a(e))l(e,n,o);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout((function(){i(r)}))}}:function(e,t,n,a){if(a=a||open("","_blank"),a&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return l(e,t,n);var i="application/octet-stream"===e.type,r=/constructor/i.test(o.HTMLElement)||o.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||i&&r)&&"object"==typeof FileReader){var s=new FileReader;s.onloadend=function(){var e=s.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},s.readAsDataURL(e)}else{var u=o.URL||o.webkitURL,f=u.createObjectURL(e);a?a.location=f:location.href=f,a=null,setTimeout((function(){u.revokeObjectURL(f)}),4e4)}});o.saveAs=r.saveAs=r,e.exports=r}))}).call(this,n("c8ba"))},"57ac":function(e,t,n){"use strict";n.r(t);var l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("loadingPage",{attrs:{loadingText:e.loadingText}}),e._v(" "),n("el-card",[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("ACH檔案上傳、下載")])]),e._v(" "),n("el-form",{ref:"query",staticClass:"queryBlock",attrs:{"status-icon":"",size:"mini",model:e.query}},[n("el-form-item",{attrs:{label:"功能"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.action,callback:function(t){e.action=t},expression:"action"}},e._l(e.actionType,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"檔案類型"}},[n("el-select",{attrs:{placeholder:"请选择",disabled:e.queryDisable},model:{value:e.query.fileType,callback:function(t){e.$set(e.query,"fileType",t)},expression:"query.fileType"}},e._l(e.fileType,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),"1"===e.action?n("div",[n("el-form-item",{attrs:{label:"檔案日期"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"選擇日期",disabled:e.queryDisable},model:{value:e.query.queryDate,callback:function(t){e.$set(e.query,"queryDate",t)},expression:"query.queryDate"}})],1)],1):e._e(),e._v(" "),"0"===e.action?n("div",{staticClass:"uploadBlock"},[n("div",{staticClass:"el-form-item__label"},[n("label",{staticClass:"importBtn"},[n("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"uploadFile"},on:{click:e.init,change:e.selectFile}}),e._v("\n            瀏覽..\n          ")])]),e._v(" "),n("el-input",{staticClass:"textInput",attrs:{placeholder:"尚未選擇檔案",readonly:""},model:{value:e.file.name,callback:function(t){e.$set(e.file,"name",t)},expression:"file.name"}})],1):e._e(),e._v(" "),n("el-form-item",{staticClass:"btnBlock"},["1"===e.action?n("el-button",{attrs:{type:"primary",disabled:e.queryDisable},on:{click:e.getFile}},[e._v("查詢")]):e._e(),e._v(" "),"0"===e.action?n("el-button",{attrs:{type:"primary",disabled:e.queryDisable},on:{click:e.uploadFile}},[e._v("上傳")]):e._e(),e._v(" "),n("el-button",{attrs:{type:"danger"},on:{click:e.init}},[e._v("清除")])],1)],1)],1),e._v(" "),"1"===e.action?n("el-card",[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("上傳紀錄")])]),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.fileList,border:"","empty-text":"暫無資料"}},[n("el-table-column",{attrs:{type:"index",width:"40"}}),e._v(" "),n("el-table-column",{attrs:{prop:"fileName",label:"檔案名稱",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{width:"70",label:"下載",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-download"},on:{click:function(n){return e.createFile(t.row)}}})]}}],null,!1,3520610292)})],1)],1):e._e()],1)},a=[],i=(n("7f7f"),n("1157")),o=n.n(i),r=n("eaf3"),c=n("21a6"),s=n("b775");function u(e,t){var n={fileDate:e,fileType:t};return Object(s["a"])({url:"/file/getFileList",method:"post",data:n})}function f(e,t){var n={fileName:e,fileType:t};return Object(s["a"])({url:"/file/downloadFile",method:"post",data:n})}function d(e){return s["a"].post("/file/uploadFile",e,{headers:{"Content-Type":"multipart/form-data"}})}var p=n("5c96"),v=n("4214"),y={name:"ACHDataAccess",components:{loadingPage:r["default"]},data:function(){return{loadingText:null,action:"0",file:{},fileList:[],fileType:v.fileType,actionType:v.dataActionType,total:2,query:{},queryDisable:!1}},methods:{init:function(){var e=this;e.file={},e.fileList=[],e.query={fileType:"0",queryDate:null},e.queryDisable=!1},selectFile:function(){var e=this;e.file=o()("#uploadFile")[0].files[0]},uploadFile:function(){var e=this;if(void 0===e.file.name)e.createWarm("尚未選擇檔案");else{var t=new FormData;t.append("fileType","0"),t.append("file",e.file),e.loadingText="上傳中",d(t).then((function(t){e.loadingText=null,p["Notification"].success({title:"檔案上傳完成"}),e.init()})).catch((function(t){e.loadingText=null}))}},createFile:function(e){var t=this;t.loadingText="下載中",f(e.fileName,t.query.fileType).then((function(n){t.loadingText=null;var l=new Blob([n],{type:"text/plain;charset=utf-8"});c["saveAs"](l,e.fileName)})).catch((function(e){t.loadingText=null}))},getFile:function(){var e=this;e.loadingText="搜尋中",u(e.query.queryDate,e.query.fileType).then((function(t){e.loadingText=null,e.checkResponseValue(t.result,"fileInfo")?(e.fileList=e.convertDataToArray(t.result.fileInfo),e.queryDisable=!0):e.createWarm("查無資料")})).catch((function(t){e.loadingText=null}))}},mounted:function(){this.init()},watch:{action:{deep:!0,immediate:!0,handler:function(e){this.init()}}}},m=y,b=n("2877"),h=Object(b["a"])(m,l,a,!1,null,null,null);t["default"]=h.exports},eaf3:function(e,t,n){"use strict";n.r(t);var l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{"element-loading-text":e.loadingText,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}})])},a=[],i={props:{loadingText:{type:String,default:null}},data:function(){return{fullscreenLoading:!1}},watch:{loadingText:function(){this.fullscreenLoading=null!=this.loadingText}}},o=i,r=n("2877"),c=Object(r["a"])(o,l,a,!1,null,null,null);t["default"]=c.exports}}]);