(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43677e40","chunk-37097fc2","chunk-2d23031f"],{"1abe":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));var l=a("b775");function n(e,t,a){var n={username:e,rows:t,page:a};return Object(l["a"])({url:"/payment/weeklyTx",method:"post",data:n})}function i(e,t,a,n){var i={username:e,weeklyTxId:t,rows:a,page:n};return console.log(i),Object(l["a"])({url:"/payment/weeklyTxDtl",method:"post",data:i})}},c3ed:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("loadingPage",{attrs:{loadingText:e.loadingText}}),e._v(" "),a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("抵用券核銷查詢")])]),e._v(" "),a("el-form",{ref:"query",staticClass:"queryBlock",attrs:{"status-icon":"",size:"mini",model:e.query,rules:e.rules}},[a("el-form-item",{attrs:{label:"店家帳號",prop:"username"}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.query.username,callback:function(t){e.$set(e.query,"username",t)},expression:"query.username"}})],1),e._v(" "),a("el-form-item",{staticClass:"btnBlock"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getTransInfo(e.query)}}},[e._v("查詢")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:e.init}},[e._v("清除")])],1)],1)],1),e._v(" "),a("el-card",{staticClass:"detailCard"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.result.weeklyTransaction,border:"","empty-text":"暫無資料"}},[a("el-table-column",{attrs:{width:"70",label:"明細",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-tickets"},on:{click:function(a){return e.showDetail(t.row)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"storeName",label:"店名",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"interval",label:"週結起迄日",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalAmount",label:"週結總金額",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"isConfirmLabel",label:"確認週結",width:"180",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"statusDesc",label:"撥款狀態",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"statusDesc",label:"銷帳狀態",sortable:""}})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.query.page,limit:e.query.limit},on:{"update:page":function(t){return e.$set(e.query,"page",t)},"update:limit":function(t){return e.$set(e.query,"limit",t)},pagination:e.getTransInfo}})],1),e._v(" "),a("el-dialog",{attrs:{title:"週結明細",visible:e.dialogDetail,width:"80%"},on:{"update:visible":function(t){e.dialogDetail=t}}},[a("detailTable",{attrs:{weekData:e.weekData,userName:e.query.username,isDialogVisible:e.dialogDetail}})],1)],1)},n=[],i=(a("ac6a"),a("eaf3")),r=a("ee68"),o=a("1abe"),s={name:"CouponWriteOffHistory",components:{detailTable:r["default"],loadingPage:i["default"]},data:function(){return{query:{},weekData:{},result:{},dialogDetail:!1,loadingText:null,queryDisable:!1,total:0,rules:{username:[{required:!0,message:"請輸店家帳號",trigger:["blur","change"]}]}}},mounted:function(){this.init()},methods:{init:function(){var e=this;e.query={username:"",page:1,limit:10},e.result={},e.weekData={},e.resetForm("query"),e.queryDisable=!1},showDetail:function(e){this.dialogDetail=!0,this.weekData=e},getTransInfo:function(e){var t=this;console.log(e),t.$refs["query"].validate((function(a){a&&(t.loadingText="搜尋中",Object(o["a"])(t.query.username,e.limit,e.page).then((function(e){t.loadingText=null,console.log(e.result),t.checkResponseValue(e.result,"weeklyTransaction")?(t.total=e.result.totalRecords,t.result.weeklyTransaction=t.convertDataToArray(e.result.weeklyTransaction),t.queryDisable=!0,t.setColumnLabel()):t.createWarm("查無資料")})).catch((function(e){t.loadingText=null})))}))},setColumnLabel:function(){var e=this;e.result.weeklyTransaction.forEach((function(t){t.interval=t.weekStart+"~"+t.weekEnd,t.isConfirmLabel=e.convertStatusFromString(t.isConfirm)}))}},watch:{}},u=s,c=a("2877"),d=Object(c["a"])(u,l,n,!1,null,null,null);t["default"]=d.exports},eaf3:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{"element-loading-text":e.loadingText,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}})])},n=[],i={props:{loadingText:{type:String,default:null}},data:function(){return{fullscreenLoading:!1}},watch:{loadingText:function(){this.fullscreenLoading=null!=this.loadingText}}},r=i,o=a("2877"),s=Object(o["a"])(r,l,n,!1,null,null,null);t["default"]=s.exports},ee68:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("loadingPage",{attrs:{loadingText:e.loadingText}}),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.deatilList,"empty-text":"暫無資料"}},[a("el-table-column",{attrs:{label:"消費時間",prop:"consumeTime"}}),e._v(" "),a("el-table-column",{attrs:{label:"抵用券金額",prop:"amount"}}),e._v(" "),a("el-table-column",{attrs:{label:"店家類型",prop:"typeName"}})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParam.page,limit:e.queryParam.limit},on:{"update:page":function(t){return e.$set(e.queryParam,"page",t)},"update:limit":function(t){return e.$set(e.queryParam,"limit",t)},pagination:e.getDetail}})],1)},n=[],i=(a("ac6a"),a("eaf3")),r=a("1abe"),o={name:"CustomerInfo",components:{loadingPage:i["default"]},props:{isDialogVisible:{type:Boolean,default:!1},userName:{type:String,required:!0,default:{}},weekData:{type:Object,required:!0,default:{}}},data:function(){return{queryParam:{},deatilList:[],total:0,loadingText:null}},mounted:function(){this.init()},methods:{init:function(){var e=this;e.queryParam={limit:1,page:10},e.total=0,e.deatilList=[],e.loadingText=null},getDetail:function(e){var t=this;t.loadingText="搜尋中",Object(r["b"])(t.userName,t.weekData.weeklyTxId,e.limit,e.page).then((function(e){t.loadingText=null,t.checkResponseValue(e.result,"weeklyTxDtl")&&(t.total=e.result.totalRecords,t.deatilList=t.convertDataToArray(e.result.weeklyTxDtl),t.setColumnLabel())})).catch((function(e){t.loadingText=null}))},setColumnLabel:function(){var e=this;e.deatilList.forEach((function(t){t.typeName=e.convertStoreType(t.storeType)}))}},watch:{weekData:{deep:!0,immediate:!0,handler:function(e){this.init(),this.isDialogVisible&&this.getDetail(this.queryParam)}}}},s=o,u=a("2877"),c=Object(u["a"])(s,l,n,!1,null,null,null);t["default"]=c.exports}}]);