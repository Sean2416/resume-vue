(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ac01c9dc","chunk-2d23031f"],{6900:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return l})),a.d(t,"d",(function(){return o})),a.d(t,"b",(function(){return i}));var n=a("b775");function r(e,t,a){var r={userType:e,username:t,identity:a};return Object(n["a"])({url:"/getUserProfile",method:"post",data:r})}function l(e,t){var a={identity:e,username:t};return Object(n["a"])({url:"/coupon/getCouponOverview",method:"post",data:a})}function o(e){var t={userId:e};return Object(n["a"])({url:"/coupon/resetPrint",method:"post",data:t})}function i(e,t,a,r,l,o,i,u,s){var c={identity:e,username:t,role:a,couponType:r,storeType:l,startDate:o,endDate:i,rows:u,page:s};return Object(n["a"])({url:"/coupon/transactionHistory",method:"post",data:c})}},d0a7:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("loadingPage",{attrs:{loadingText:e.loadingText}}),e._v(" "),a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("收款紀錄查詢")])]),e._v(" "),a("el-form",{ref:"query",staticClass:"queryBlock",attrs:{"status-icon":"",size:"mini",model:e.query}},[a("el-form-item",{attrs:{label:"查詢區間"}},[a("el-radio-group",{attrs:{disabled:e.queryDisable},model:{value:e.query.interval,callback:function(t){e.$set(e.query,"interval",t)},expression:"query.interval"}},[a("el-radio",{attrs:{label:7}},[e._v("近一周")]),e._v(" "),a("el-radio",{attrs:{label:21}},[e._v("近三周")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("自訂")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"自訂區間"}},[a("el-date-picker",{attrs:{"value-format":"yyyy/MM/dd",type:"daterange","range-separator":"至","start-placeholder":"開始日期",disabled:0!==e.query.interval||e.queryDisable,"end-placeholder":"结束日期"},model:{value:e.query.date,callback:function(t){e.$set(e.query,"date",t)},expression:"query.date"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"消費券類型"}},[a("el-select",{attrs:{disabled:e.queryDisable},model:{value:e.query.couponType,callback:function(t){e.$set(e.query,"couponType",t)},expression:"query.couponType"}},e._l(e.couponType,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"帳號"}},[a("el-input",{staticClass:"input-with-select",attrs:{disabled:e.queryDisable,clearable:""},model:{value:e.query.username,callback:function(t){e.$set(e.query,"username",t)},expression:"query.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"店家證件號碼"}},[a("el-input",{staticClass:"input-with-select",attrs:{disabled:e.queryDisable,clearable:""},model:{value:e.query.identity,callback:function(t){e.$set(e.query,"identity",t)},expression:"query.identity"}})],1),e._v(" "),a("el-form-item",{staticClass:"btnBlock"},[a("el-button",{attrs:{type:"primary",disabled:e.queryDisable},on:{click:function(t){return e.getTransInfo(e.query)}}},[e._v("查詢")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:e.init}},[e._v("清除")])],1)],1)],1),e._v(" "),a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("收款紀錄")])]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.couponInfoList,border:"","empty-text":"暫無資料"}},[a("el-table-column",{attrs:{prop:"couponId",label:"抵用券序號",width:"180",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"consumeTime",label:"消費時間",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"抵用券金額",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"typeName",label:"店家類別",sortable:""}})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.query.page,limit:e.query.limit},on:{"update:page":function(t){return e.$set(e.query,"page",t)},"update:limit":function(t){return e.$set(e.query,"limit",t)},pagination:e.getTransInfo}})],1)],1)},r=[],l=(a("ac6a"),a("eaf3")),o=a("6900"),i=a("4214"),u={name:"CouponConsumptionHistory",components:{loadingPage:l["default"]},data:function(){return{query:{},couponInfoList:[],total:0,loadingText:null,couponType:i.couponType,queryDisable:!1}},mounted:function(){this.init()},methods:{init:function(){var e=this;e.query={username:"",identity:"",couponType:"A",interval:7,date:e.getDateInterval(7,0),limit:10,page:1},e.couponInfoList=[],e.total=0,e.queryDisable=!1},queryParamValid:function(){var e=this;return""!==e.query.username||""!==e.query.identity||(e.createWarm("請至少輸入一個查詢條件"),!1)},getTransInfo:function(e){var t=this;t.queryParamValid()&&(t.loadingText="搜尋中",Object(o["b"])(t.query.identity,t.query.username,"S",t.query.couponType,"-1",t.query.date[0],t.query.date[1],e.limit,e.page).then((function(e){t.loadingText=null,t.checkResponseValue(e.result,"couponInfo")?(t.total=e.result.totalRecords,t.couponInfoList=t.convertDataToArray(e.result.couponInfo),t.setColumnLabel(),t.queryDisable=!0):t.createWarm("查無資料")})).catch((function(e){t.loadingText=null})))},setColumnLabel:function(){var e=this;e.couponInfoList.forEach((function(t){t.typeName=e.convertStoreType(t.storeType)}))}},watch:{"query.interval":function(){var e=this;e.query.date=e.getDateInterval(e.query.interval,0)}}},s=u,c=a("2877"),d=Object(c["a"])(s,n,r,!1,null,null,null);t["default"]=d.exports},eaf3:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{"element-loading-text":e.loadingText,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}})])},r=[],l={props:{loadingText:{type:String,default:null}},data:function(){return{fullscreenLoading:!1}},watch:{loadingText:function(){this.fullscreenLoading=null!=this.loadingText}}},o=l,i=a("2877"),u=Object(i["a"])(o,n,r,!1,null,null,null);t["default"]=u.exports}}]);